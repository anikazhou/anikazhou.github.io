<!DOCTYPE html>
<html>
  <head>
    <script src="bower_components/platform/platform.js"></script>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest/dist/tf.min.js"></script>
    <script type="module">
    

        self.model = await tf.loadLayersModel('tfjs_model/model.json');

        console.log('loaded model')

        var the_dat = tf.tensor([[-84.58555603027344, -60.48863983154297, -59.0792350769043, -86.41307067871094, -86.41307067871094, -80.49856567382812, -80.97666931152344, -81.90016174316406, -80.26710510253906, -81.44522094726562, -77.9576644897461, -80.85464477539062, -82.60540771484375, -86.15696716308594, -86.24662017822266], [-72.36465454101562, -56.239593505859375, -59.537742614746094, -80.44876098632812, -80.44876098632812, -75.9495620727539, -72.6502685546875, -74.28756713867188, -70.25473022460938, -70.30575561523438, -62.71549606323242, -65.82795715332031, -71.64010620117188, -72.6683578491211, -73.7840347290039], [-60.88935852050781, -44.385406494140625, -47.256160736083984, -61.3965950012207, -61.3965950012207, -59.58063888549805, -62.25163650512695, -61.837223052978516, -61.176963806152344, -52.70862579345703, -50.70512390136719, -53.8013801574707, -60.69388961791992, -64.64176177978516, -69.07112884521484], [-63.40398406982422, -47.2674560546875, -47.09581756591797, -61.395015716552734, -61.395015716552734, -57.52259826660156, -54.159423828125, -54.555824279785156, -57.83470916748047, -51.886192321777344, -54.212745666503906, -60.051048278808594, -67.80455780029297, -71.9148941040039, -75.89784240722656], [-56.595787048339844, -39.413265228271484, -41.85580825805664, -71.14824676513672, -71.14824676513672, -64.80155944824219, -60.31645584106445, -57.374752044677734, -57.27946853637695, -48.93056869506836, -51.608036041259766, -59.019378662109375, -68.85342407226562, -69.16104125976562, -69.51175689697266], [-60.88888931274414, -39.4923210144043, -37.539512634277344, -48.05324172973633, -48.05324172973633, -49.284095764160156, -52.2778434753418, -55.06237030029297, -52.1728515625, -45.98405456542969, -46.9334831237793, -52.55181121826172, -59.5389404296875, -62.75477981567383, -65.65582275390625], [-71.89564514160156, -51.33107376098633, -46.93414306640625, -54.24201583862305, -54.24201583862305, -50.23933029174805, -47.24543380737305, -46.88017654418945, -48.86381149291992, -46.710880279541016, -49.88292694091797, -54.66285705566406, -58.6555290222168, -62.06892395019531, -65.44806671142578], [-80.42337799072266, -58.62174987792969, -54.81084060668945, -55.1063232421875, -55.1063232421875, -52.6280517578125, -53.47700500488281, -57.168113708496094, -59.404781341552734, -57.48845672607422, -61.09461212158203, -66.09524536132812, -67.0877456665039, -73.1497802734375, -72.48686218261719], [-80.52240753173828, -60.58190155029297, -57.4229850769043, -60.067928314208984, -60.067928314208984, -64.44442749023438, -60.39666748046875, -60.22765350341797, -58.985572814941406, -58.96864700317383, -62.64189147949219, -69.75463104248047, -76.90495300292969, -80.16275024414062, -85.76969146728516], [-86.56536102294922, -72.01012420654297, -68.15151977539062, -68.2762451171875, -68.2762451171875, -72.33708953857422, -73.37281036376953, -75.15442657470703, -73.31240844726562, -70.56578063964844, -77.60213470458984, -87.07443237304688, -92.34764099121094, -95.2113037109375, -100.23820495605469], [-91.58869934082031, -75.7870101928711, -73.2837905883789, -74.22530364990234, -74.22530364990234, -75.36792755126953, -78.20977020263672, -81.05520629882812, -80.40909576416016, -78.44700622558594, -86.16659545898438, -95.08816528320312, -96.61603546142578, -101.02262878417969, -107.97052001953125], [-96.04216003417969, -74.96483612060547, -63.511905670166016, -77.0661392211914, -77.0661392211914, -73.40188598632812, -82.46792602539062, -85.94694519042969, -80.62895965576172, -79.74190521240234, -87.35884857177734, -94.19319152832031, -97.21565246582031, -102.72386169433594, -112.81757354736328], [-92.95220184326172, -72.82550048828125, -67.4107666015625, -74.87337493896484, -74.87337493896484, -73.09119415283203, -77.02960205078125, -93.26351928710938, -83.98286437988281, -82.35137176513672, -100.59684753417969, -101.1317138671875, -98.0149154663086, -108.3231201171875, -113.88184356689453], [-93.49857330322266, -74.08641052246094, -72.1312484741211, -78.49221801757812, -78.49221801757812, -72.65725708007812, -77.60196685791016, -82.20082092285156, -101.7094497680664, -81.98370361328125, -95.1552505493164, -99.65155029296875, -98.46299743652344, -107.76339721679688, -115.59066772460938], [-100.923095703125, -76.9613265991211, -75.40901947021484, -84.27024841308594, -84.27024841308594, -73.5316162109375, -92.53056335449219, -83.15164184570312, -79.51669311523438, -77.51575469970703, -83.652099609375, -91.37138366699219, -96.28341674804688, -112.50045013427734, -111.25048828125], [-109.15042114257812, -77.8552474975586, -74.36575317382812, -82.43164825439453, -82.43164825439453, -72.3709716796875, -79.5921859741211, -89.36045837402344, -76.80779266357422, -76.80648040771484, -82.10174560546875, -95.58395385742188, -96.91718292236328, -101.78128051757812, -106.04358673095703]]);
        var mean = tf.mean(the_dat);
        var std = tf.moments(the_dat).variance.sqrt();
        var normed_the_dat = tf.div(tf.sub(the_dat, mean), std);
        var dataTensor = tf.stack([normed_the_dat]);
        var dataTensorNormedTransposed = tf.transpose(dataTensor, [0, 2, 1]);
        
        // // gets model prediction
        var data = dataTensorNormedTransposed
        
        var y = self.model.predict(data);

        var inputs = data;
        var outputs;
        for(var i = 1; i < 5; i ++){
            outputs = self.model.layers[i].apply(inputs=inputs);
            console.log('out at layer', i);
            tf.print(outputs);
            inputs = outputs;
        }

        console.log('running the model using model.predict gives the tensor');
        tf.print(y)
    </script>
  </head>
  <body>
  </body>
</html>
